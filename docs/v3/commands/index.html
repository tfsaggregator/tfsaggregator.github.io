<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Aggregator CLI Commands #  This is the complete list of Aggregator CLI commands. Click on a link to read a full description.
   Verb Use Action     logon.azure Azure Logon into Azure. This must be done before other verbs.   logon.ado Both Logon into Azure DevOps. This must be done before other verbs.   logon.env Both Logon into both Azure and Azure DevOps using Environment Variables."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="CLI Commands"><meta property="og:description" content="Aggregator Documentation"><meta property="og:type" content="website"><meta property="og:url" content="https://tfsaggregator.github.io/docs/v3/commands/"><title>CLI Commands | Aggregator</title><link rel=manifest href=https://tfsaggregator.github.io/manifest.json><link rel=icon href=https://tfsaggregator.github.io/favicon.png type=image/x-icon><link rel=stylesheet href=https://tfsaggregator.github.io/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI="><script defer src=https://tfsaggregator.github.io/en.search.min.5c4db50085c7546611b973ad19deda599fce352d8b33a5bdf6f5704e06bba878.js integrity="sha256-XE21AIXHVGYRuXOtGd7aWZ/ONS2LM6W99vVwTga7qHg="></script><link rel=alternate type=application/rss+xml href=https://tfsaggregator.github.io/docs/v3/commands/index.xml title=Aggregator></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://tfsaggregator.github.io/><span>Aggregator</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://tfsaggregator.github.io/docs/v3/>Aggregator 3 (CLI)</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/>Setup</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azdo-authn/>Azure DevOps Personal Access Token</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azure/>Azure CLI Setup</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/docker/>Docker configuration</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/production/>Production on Azure</a><ul></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/ class=active>CLI Commands</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/commands/common-options/>Common options</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/authentication-commands/>Authentication commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/instance-commands/>Instance commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/rule-commands/>Rule commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/map-commands/>Mapping commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/info-commands/>Informational commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/command-examples/>Examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/>Rules</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/rules/directives/>Directives</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/workitem/>WorkItem event objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/common-rule-objects/>Common objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-basic/>Basic examples</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-advanced/>Advanced examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/>Design</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/design/caveat/>Caveats</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/parallelism/>Parallelism</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/api/>REST API</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/troubleshoot/>Troubleshoot</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/>Contribute</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/pipelines/>Pipelines</a></li></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v2/>TFS Aggregator v2</a><ul><li><a href=https://tfsaggregator.github.io/docs/v2/intro/ class=collapsed>Introduction</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/using/ class=collapsed>Users' Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/admin/ class=collapsed>Administrator Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/ class=collapsed>Contributing</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/changelog/>Changelog</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://tfsaggregator.github.io/svg/menu.svg class=book-icon alt=Menu></label>
<strong>CLI Commands</strong>
<label for=toc-control><img src=https://tfsaggregator.github.io/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#exit-codes>Exit codes</a><ul><li><a href=#environment-variables>Environment Variables</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=aggregator-cli-commands>Aggregator CLI Commands
<a class=anchor href=#aggregator-cli-commands>#</a></h1><p>This is the complete list of Aggregator CLI commands. Click on a link to read a full description.</p><table><thead><tr><th>Verb</th><th align=center>Use</th><th>Action</th></tr></thead><tbody><tr><td><a href=authentication-commands/#logonazure>logon.azure</a></td><td align=center>Azure</td><td>Logon into Azure. This must be done before other verbs.</td></tr><tr><td><a href=authentication-commands/#logonado>logon.ado</a></td><td align=center>Both</td><td>Logon into Azure DevOps. This must be done before other verbs.</td></tr><tr><td><a href=authentication-commands/#logonenv>logon.env</a></td><td align=center>Both</td><td>Logon into both Azure and Azure DevOps using Environment Variables. [v0.9.14]</td></tr><tr><td><a href=instance-commands/#installinstance>install.instance</a></td><td align=center>Azure</td><td>Creates a new Aggregator instance in Azure.</td></tr><tr><td><a href=rule-commands/#addrule>add.rule</a></td><td align=center>Azure</td><td>Add a rule to existing Aggregator instance in Azure.</td></tr><tr><td><a href=map-commands/#maprule>map.rule</a></td><td align=center>Azure</td><td>Maps an Aggregator Rule in Azure to existing Azure DevOps Projects, DevOps events are sent to the rule.</td></tr><tr><td><a href=map-commands/#maplocalrule-v10>map.local.rule</a></td><td align=center>Docker</td><td>Maps an Aggregator Rule hosted in Docker to existing Azure DevOps Projects, DevOps events are sent to the rule. [v1.0]</td></tr><tr><td><a href=info-commands/#listinstances>list.instances</a></td><td align=center>Azure</td><td>Lists Aggregator instances in the specified Azure Region or Resource Group or in the entire Subscription.</td></tr><tr><td><a href=info-commands/#listrules>list.rules</a></td><td align=center>Azure</td><td>List the rules in an existing Aggregator instance in Azure.</td></tr><tr><td><a href=info-commands/#listmappings>list.mappings</a></td><td align=center>Azure</td><td>Lists mappings from existing Azure DevOps Projects to Aggregator Rules.</td></tr><tr><td><a href=rule-commands/#invokerule>invoke.rule</a></td><td align=center>Both</td><td>Executes a rule locally or in an existing Aggregator instance.</td></tr><tr><td><a href=instance-commands/#configureinstance>configure.instance</a></td><td align=center>Azure</td><td>Configures an existing Aggregator instance (currently the Azure DevOps authentication).</td></tr><tr><td><a href=instance-commands/#updateinstance>update.instance</a></td><td align=center>Azure</td><td>Updates the runtime of an Aggregator instance in Azure.</td></tr><tr><td><a href=rule-commands/#configurerule>configure.rule</a></td><td align=center>Azure</td><td>Change a rule configuration (currently only enabling/disabling).</td></tr><tr><td><a href=rule-commands/#updaterule>update.rule</a></td><td align=center>Azure</td><td>Update the code of a rule and/or its runtime.</td></tr><tr><td><a href=map-commands/#updatemappings-v101>update.mappings</a></td><td align=center>Azure</td><td>Updates any mapping from an old Aggregator instance in Azure to a new Aggregator instance.</td></tr><tr><td><a href=map-commands/#unmaprule>unmap.rule</a></td><td align=center>Azure</td><td>Removes a mapping to an Aggregator Rule from a Azure DevOps Project.</td></tr><tr><td><a href=rule-commands/#removerule>remove.rule</a></td><td align=center>Azure</td><td>Remove a rule from existing Aggregator instance in Azure, removing any mapping to the Rule.</td></tr><tr><td><a href=instance-commands/#uninstallinstance>uninstall.instance</a></td><td align=center>Azure</td><td>Destroy an Aggregator instance in Azure, removing any mapping to the Rules.</td></tr><tr><td><a href=authentication-commands/#logoff>logoff</a></td><td align=center>Both</td><td>Logoff removing any locally cached credential.</td></tr><tr><td>help</td><td align=center>Both</td><td>Display more information on a specific command.</td></tr><tr><td>version</td><td align=center>Both</td><td>Displays the Aggregator version.</td></tr></tbody></table><p>You can see a few Command examples in <a href=command-examples/>Sample Aggregator CLI usage</a>.</p><h2 id=exit-codes>Exit codes
<a class=anchor href=#exit-codes>#</a></h2><p>Aggregator CLI returns <code>0</code> when a command completes successfully. You can check the return code using <a href=https://ss64.com/nt/errorlevel.html><code>%ERRORLEVEL%</code></a> in cmd, <a href=https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_automatic_variables><code>$LastExitCode</code></a> in PowerShell, or <a href=https://www.tldp.org/LDP/abs/html/exit-status.html><code>$?</code></a> in bash.</p><table><thead><tr><th>Exit Code</th><th>Meaning</th></tr></thead><tbody><tr><td>0</td><td>Command succeeded</td></tr><tr><td>1</td><td>Command failed</td></tr><tr><td>2</td><td>Invalid argument(s) or unknown command</td></tr><tr><td>3</td><td>Specified resource(s) not found e.g. in list commands</td></tr><tr><td>99</td><td>Unexpected internal error</td></tr></tbody></table><h3 id=environment-variables>Environment Variables
<a class=anchor href=#environment-variables>#</a></h3><h4 id=telemetry-v0914>Telemetry [v0.9.14]
<a class=anchor href=#telemetry-v0914>#</a></h4><p>Aggregator CLI collects anonymised telemetry data, to report on which commands and command options are most used.</p><p>You can turn off telemetry by setting the <code>AGGREGATOR_TELEMETRY_DISABLED</code> to a true value, e.g.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Batchfile data-lang=Batchfile>AGGREGATOR_TELEMETRY_DISABLED=1
</code></pre></div><p>The Runtime Engine, running in the Azure Function, does not collect any telemetry data.</p><h4 id=automatic-version-check-v10>Automatic Version Check [v1.0]
<a class=anchor href=#automatic-version-check-v10>#</a></h4><p>You can turn off the automatic check for new CLI version, setting to a true value:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Batchfile data-lang=Batchfile>AGGREGATOR_NEW_VERSION_CHECK_DISABLED=1
</code></pre></div><h4 id=shared-secret-v10>Shared secret [v1.0]
<a class=anchor href=#shared-secret-v10>#</a></h4><p><code>Aggregator_SharedSecret</code> is used by the <a href=map-commands/#maplocalrule-v10><code>map.local.rule</code></a> command for initial authentication.
Use a long complex password.
This value must be identical on CLI and the Docker container.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/commit/4af646b980051ee9c670827cfe0be0843b775bbc title="Last modified by Jesse Houwing | August 10, 2022" target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/calendar.svg class=book-icon alt=Calendar>
<span>August 10, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/edit/master/content//docs/v3/commands/_index.md target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#exit-codes>Exit codes</a><ul><li><a href=#environment-variables>Environment Variables</a></li></ul></li></ul></nav></aside></main></body></html>