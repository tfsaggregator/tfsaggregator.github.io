<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An Aggregator Rule is a simple text file ending in .rule. At the beginning of the file you can put one or more directive to control the Interpreter. It is recommended to add the event directive. The remaining part of the file is a normal programming language with access to a few objects and interact with Azure DevOps.
.directive1 .directive2 arg1 .directive3 arg1 arg2 /* * valid C# code using predefined Objects, Variables and Types */ Directives #  A directive is metadata used to change a behavior of the Rule Interpreter."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Rules"><meta property="og:description" content="Aggregator Documentation"><meta property="og:type" content="website"><meta property="og:url" content="https://tfsaggregator.github.io/docs/v3/rules/"><title>Rules | Aggregator</title><link rel=manifest href=https://tfsaggregator.github.io/manifest.json><link rel=icon href=https://tfsaggregator.github.io/favicon.png type=image/x-icon><link rel=stylesheet href=https://tfsaggregator.github.io/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI="><script defer src=https://tfsaggregator.github.io/en.search.min.409cc5b7d8bce0a73b866aeffc953c3bad667ca8bc223a9161b4561c57238d9f.js integrity="sha256-QJzFt9i84Kc7hmrv/JU8O61mfKi8IjqRYbRWHFcjjZ8="></script><link rel=alternate type=application/rss+xml href=https://tfsaggregator.github.io/docs/v3/rules/index.xml title=Aggregator></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://tfsaggregator.github.io/><span>Aggregator</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://tfsaggregator.github.io/docs/v3/>Aggregator 3 (CLI)</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/>Setup</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azdo-authn/>Azure DevOps Personal Access Token</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azure/>Azure CLI Setup</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/docker/>Docker configuration</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/production/>Production on Azure</a><ul></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/>CLI Commands</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/commands/common-options/>Common options</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/authentication-commands/>Authentication commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/instance-commands/>Instance commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/rule-commands/>Rule commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/map-commands/>Mapping commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/info-commands/>Informational commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/command-examples/>Examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/ class=active>Rules</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/rules/directives/>Directives</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/workitem/>WorkItem event objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/common-rule-objects/>Common objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-basic/>Basic examples</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-advanced/>Advanced examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/>Design</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/design/parallelism/>Parallelism</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/api/>REST API</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/>Contribute</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/pipelines/>Pipelines</a></li></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v2/>TFS Aggregator v2</a><ul><li><a href=https://tfsaggregator.github.io/docs/v2/intro/ class=collapsed>Introduction</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/using/ class=collapsed>Users' Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/admin/ class=collapsed>Administrator Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/ class=collapsed>Contributing</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/changelog/>Changelog</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://tfsaggregator.github.io/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Rules</strong>
<label for=toc-control><img src=https://tfsaggregator.github.io/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#directives>Directives</a></li><li><a href=#c-language>C# language</a></li><li><a href=#pre-defined-variables>Pre-defined Variables</a><ul><li><a href=#work-item-variables>Work Item Variables</a></li></ul></li></ul></nav></aside></header><article class=markdown><p>An Aggregator Rule is a simple text file ending in <code>.rule</code>. At the beginning of the file you can put one or more directive to control the Interpreter. It is recommended to add the <a href=./directives/#event-directive-v10>event</a> directive.
The remaining part of the file is a normal programming language with access to a few objects and interact with Azure DevOps.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C# data-lang=C#>.directive1
.directive2 arg1
.directive3 arg1 arg2
<span style=color:#75715e>/*
</span><span style=color:#75715e> *  valid C# code using predefined Objects, Variables and Types
</span><span style=color:#75715e> */</span>
</code></pre></div><h2 id=directives>Directives
<a class=anchor href=#directives>#</a></h2><p>A directive is metadata used to change a behavior of the Rule Interpreter.
The complete list of directives is <a href=./directives/>here</a>.</p><h2 id=c-language>C# language
<a class=anchor href=#c-language>#</a></h2><p>The Rule language use C# as defined in Microsoft <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/>documentation</a>. The code uses predefined items specific for the Azure DevOps events supported by Aggregator.</p><h2 id=pre-defined-variables>Pre-defined Variables
<a class=anchor href=#pre-defined-variables>#</a></h2><p>You can access any of these variable in any rule.</p><table><thead><tr><th>Variable</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>eventType</code></td><td><code>string</code></td><td>Name of event that triggered the rule.</td></tr><tr><td><code>logger</code></td><td><code>IAggregatorLogger</code></td><td>offers methods to log messages with different levels.</td></tr></tbody></table><p>More details in <a href=./common-rule-objects>Common objects</a>.</p><h3 id=work-item-variables>Work Item Variables
<a class=anchor href=#work-item-variables>#</a></h3><p>The following variables are available only for Work Item events.</p><table><thead><tr><th>Variable</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>self</code></td><td><code>WorkItemWrapper</code></td><td>The Work Item which triggered the rule.</td></tr><tr><td><code>selfChanges</code></td><td><code>WorkItemUpdateWrapper</code></td><td>Represents the changes made to the Work Item object. Valid only for the <code>workitem.updated</code> event.</td></tr><tr><td><code>store</code></td><td><code>WorkItemStore</code></td><td>Allows retrieval, creation and removal of work items.</td></tr></tbody></table><p>More details in <a href=./workitem>WorkItem event objects</a>.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/commit/bc50064fbe66a6ae46da8ebcd902dad092ca3985 title="Last modified by Giulio Vian | October 30, 2020" target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/calendar.svg class=book-icon alt=Calendar>
<span>October 30, 2020</span></a></div><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/edit/master/content//docs/v3/rules/_index.md target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#directives>Directives</a></li><li><a href=#c-language>C# language</a></li><li><a href=#pre-defined-variables>Pre-defined Variables</a><ul><li><a href=#work-item-variables>Work Item Variables</a></li></ul></li></ul></nav></aside></main></body></html>