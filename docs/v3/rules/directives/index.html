<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Directives #  The directives must appear in the first lines of a Rule file. They are parsed by Aggregator and removed before compiling the code.
language directive #  .lang=C# .language=Csharp
Currently the only supported language is C#. You can use the .lang directive to specify the programming language used by the rule. If no language is specified: C# is default.
reference directive #  Loads the specified assembly in the Rule execution context"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Directives"><meta property="og:description" content="Directives #  The directives must appear in the first lines of a Rule file. They are parsed by Aggregator and removed before compiling the code.
language directive #  .lang=C# .language=Csharp
Currently the only supported language is C#. You can use the .lang directive to specify the programming language used by the rule. If no language is specified: C# is default.
reference directive #  Loads the specified assembly in the Rule execution context"><meta property="og:type" content="article"><meta property="og:url" content="https://tfsaggregator.github.io/docs/v3/rules/directives/"><meta property="article:modified_time" content="2022-08-10T20:00:00+02:00"><title>Directives | Aggregator</title><link rel=manifest href=https://tfsaggregator.github.io/manifest.json><link rel=icon href=https://tfsaggregator.github.io/favicon.png type=image/x-icon><link rel=stylesheet href=https://tfsaggregator.github.io/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI="><script defer src=https://tfsaggregator.github.io/en.search.min.263c267bf95d1c23f1b0c06c2c1fb308af9a9586dda823de40b1d3efa4cf515e.js integrity="sha256-Jjwme/ldHCPxsMBsLB+zCK+alYbdqCPeQLHT76TPUV4="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://tfsaggregator.github.io/><span>Aggregator</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://tfsaggregator.github.io/docs/v3/>Aggregator 3 (CLI)</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/>Setup</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azdo-authn/>Azure DevOps Personal Access Token</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azure/>Azure CLI Setup</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/docker/>Docker configuration</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/production/>Production on Azure</a><ul></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/>CLI Commands</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/commands/common-options/>Common options</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/authentication-commands/>Authentication commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/instance-commands/>Instance commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/rule-commands/>Rule commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/map-commands/>Mapping commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/info-commands/>Informational commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/command-examples/>Examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/>Rules</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/rules/directives/ class=active>Directives</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/workitem/>WorkItem event objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/common-rule-objects/>Common objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-basic/>Basic examples</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-advanced/>Advanced examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/>Design</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/design/caveat/>Caveats</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/parallelism/>Parallelism</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/api/>REST API</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/troubleshoot/>Troubleshoot</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/>Contribute</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/pipelines/>Pipelines</a></li></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v2/>TFS Aggregator v2</a><ul><li><a href=https://tfsaggregator.github.io/docs/v2/intro/ class=collapsed>Introduction</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/using/ class=collapsed>Users' Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/admin/ class=collapsed>Administrator Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/ class=collapsed>Contributing</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/changelog/>Changelog</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://tfsaggregator.github.io/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Directives</strong>
<label for=toc-control><img src=https://tfsaggregator.github.io/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#directives>Directives</a><ul><li><a href=#language-directive>language directive</a></li><li><a href=#reference-directive>reference directive</a></li><li><a href=#import-directive>import directive</a></li><li><a href=#impersonate-directive>impersonate directive</a></li><li><a href=#check-directives>check directives</a></li><li><a href=#event-directive-v10>event directive [v1.0]</a></li><li><a href=#bypassrules-directive-v11>bypassrules directive [v1.1]</a></li></ul></li></ul></nav></aside></header><article class=markdown><h2 id=directives>Directives
<a class=anchor href=#directives>#</a></h2><p>The directives must appear in the first lines of a Rule file.
They are parsed by Aggregator and removed before compiling the code.</p><h3 id=language-directive>language directive
<a class=anchor href=#language-directive>#</a></h3><p><code>.lang=C#</code>
<code>.language=Csharp</code></p><p>Currently the only supported language is C#.
You can use the <code>.lang</code> directive to specify the programming language used by the rule.
If no language is specified: C# is default.</p><h3 id=reference-directive>reference directive
<a class=anchor href=#reference-directive>#</a></h3><p>Loads the specified assembly in the Rule execution context</p><p>Example
<code>.reference=System.Xml.XDocument</code></p><h3 id=import-directive>import directive
<a class=anchor href=#import-directive>#</a></h3><p>Equivalent to C# namespace
<code>.import=System.Collections.Generic</code></p><h3 id=impersonate-directive>impersonate directive
<a class=anchor href=#impersonate-directive>#</a></h3><p>Aggregator uses credentials for accessing Azure DevOps. By default the changes which
were saved back to Azure DevOps are done with the credentials provided for accessing
Azure DevOps.
In order to do the changes on behalf of the account who initiated an event, which Aggregator is going to handle,
specify
<code>.impersonate=onBehalfOfInitiator</code></p><p><strong>Attention:</strong> To use this the identify accessing Azure DevOps needs special permissions,
see <a href=../../setup/#azure-devops-personal-access-token--PAT->Rule Examples</a>.</p><h3 id=check-directives>check directives
<a class=anchor href=#check-directives>#</a></h3><p>The check directives allow a fine control on a rule&rsquo;s behaviour.</p><h4 id=check-revision-directive>check revision directive
<a class=anchor href=#check-revision-directive>#</a></h4><p>This directive disable the safety check which forbids concurrent updates (see <a href=../../design/parallelism/>Parallelism</a>).
If you set <code>.check revision false</code>, and the work item was updated after the rule was triggered but before any change made by the rule are saved, the rule changes
With <code>.check revision true</code> (assumed by default), you will receive a <strong>VS403351</strong> error, in case the work item changed in between the rule reading and writing.</p><h3 id=event-directive-v10>event directive [v1.0]
<a class=anchor href=#event-directive-v10>#</a></h3><p>Restricts the events that may trigger the Rule, see also <a href=../common-rule-objects>Common objects</a>.</p><p>Example</p><pre><code>.event=workitem.created
.event=workitem.updated
</code></pre><p>or in one line</p><pre><code>.events workitem.created,workitem.updated
</code></pre><h3 id=bypassrules-directive-v11>bypassrules directive [v1.1]
<a class=anchor href=#bypassrules-directive-v11>#</a></h3><p>Do not enforce server-side rules associated with the Work Item Type while saving changes.
By default Aggregator enforces Azure DevOps rules, e.g. a User Story in Agile Process cannot transition directly from New to Closed (see <a href="https://docs.microsoft.com/en-us/azure/devops/boards/work-items/workflow-and-state-categories?view=azure-devops&tabs=agile-process#workflow-states">Workflow states</a>).</p><p>Example</p><pre><code>.bypassrules=true
</code></pre></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/commit/594f494734b3323b5253006854dfef4730c01407 title="Last modified by Jesse Houwing | August 10, 2022" target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/calendar.svg class=book-icon alt=Calendar>
<span>August 10, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/edit/master/content//docs/v3/rules/directives.md target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#directives>Directives</a><ul><li><a href=#language-directive>language directive</a></li><li><a href=#reference-directive>reference directive</a></li><li><a href=#import-directive>import directive</a></li><li><a href=#impersonate-directive>impersonate directive</a></li><li><a href=#check-directives>check directives</a></li><li><a href=#event-directive-v10>event directive [v1.0]</a></li><li><a href=#bypassrules-directive-v11>bypassrules directive [v1.1]</a></li></ul></li></ul></nav></aside></main></body></html>