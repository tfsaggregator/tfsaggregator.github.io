<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Production Configuration and Administration #  Control performance and costs #  You can specify the size for the Virtual machine running the rules using the hostingPlanSku and hostingPlanTier options. The defaults are Y1/Dynamic, known as Consumption plan. You can select a Premium plan instead, like Premium/P2V2 for example.
Production monitoring #  Disable built-in logging and use Application Insights. Build-in log streaming is useful only for developers as it may skip or duplicate messages as in this picture."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Production Configuration and Administration #  Control performance and costs #  You can specify the size for the Virtual machine running the rules using the hostingPlanSku and hostingPlanTier options. The defaults are Y1/Dynamic, known as Consumption plan. You can select a Premium plan instead, like Premium/P2V2 for example.
Production monitoring #  Disable built-in logging and use Application Insights. Build-in log streaming is useful only for developers as it may skip or duplicate messages as in this picture."><meta property="og:type" content="article"><meta property="og:url" content="https://tfsaggregator.github.io/docs/v3/setup/production/"><meta property="article:modified_time" content="2020-06-24T11:52:56+01:00"><title>Production | Aggregator</title><link rel=manifest href=https://tfsaggregator.github.io/manifest.json><link rel=icon href=https://tfsaggregator.github.io/favicon.png type=image/x-icon><link rel=stylesheet href=https://tfsaggregator.github.io/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI="><script defer src=https://tfsaggregator.github.io/en.search.min.98fffe85a408f56c08f279d462c86a5f6ce68848e4cd24900451e3c6ff28f608.js integrity="sha256-mP/+haQI9WwI8nnUYshqX2zmiEjkzSSQBFHjxv8o9gg="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://tfsaggregator.github.io/><span>Aggregator</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://tfsaggregator.github.io/docs/v3/>Aggregator CLI</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/>Setup</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/production/ class=active>Production</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/>Commands</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/commands/command-examples/>Examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/>Rules</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-basic/>Basic examples</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-advanced/>Advanced examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/>Design</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/design/parallelism/>Parallelism</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/>Contribute</a><ul></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v2/>TFS Aggregator v2</a><ul><li><a href=https://tfsaggregator.github.io/docs/v2/intro/ class=collapsed>Introduction</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/using/ class=collapsed>Users' Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/admin/ class=collapsed>Administrator Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/ class=collapsed>Contributing</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/changelog/>Changelog</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://tfsaggregator.github.io/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Production</strong>
<label for=toc-control><img src=https://tfsaggregator.github.io/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#control-performance-and-costs>Control performance and costs</a></li><li><a href=#production-monitoring>Production monitoring</a></li><li><a href=#troubleshooting>Troubleshooting</a></li><li><a href=#renew-azure-devops-personal-access-token-pat>Renew Azure DevOps Personal Access Token (PAT)</a></li></ul></nav></aside></header><article class=markdown><h1 id=production-configuration-and-administration>Production Configuration and Administration
<a class=anchor href=#production-configuration-and-administration>#</a></h1><h2 id=control-performance-and-costs>Control performance and costs
<a class=anchor href=#control-performance-and-costs>#</a></h2><p>You can specify the size for the Virtual machine running the rules using the <code>hostingPlanSku</code> and <code>hostingPlanTier</code> options. The defaults are <strong>Y1</strong>/<strong>Dynamic</strong>, known as <a href=https://docs.microsoft.com/en-us/azure/azure-functions/functions-scale#consumption-plan>Consumption plan</a>. You can select a <a href=https://docs.microsoft.com/en-us/azure/azure-functions/functions-scale#premium-plan>Premium plan</a> instead, like <strong>Premium</strong>/<strong>P2V2</strong> for example.</p><h2 id=production-monitoring>Production monitoring
<a class=anchor href=#production-monitoring>#</a></h2><p><a href=https://docs.microsoft.com/en-us/azure/azure-functions/functions-monitoring#disable-built-in-logging>Disable built-in logging</a> and use Application Insights.
Build-in log streaming is useful only for developers as it may skip or duplicate messages as in this picture.
<img src=basic-log-streaming.png alt="Duplicated log streaming message"></p><h2 id=troubleshooting>Troubleshooting
<a class=anchor href=#troubleshooting>#</a></h2><p>Use the Application Insight instance that was created aside the Azure Function.</p><h2 id=renew-azure-devops-personal-access-token-pat>Renew Azure DevOps Personal Access Token (PAT)
<a class=anchor href=#renew-azure-devops-personal-access-token-pat>#</a></h2><p>Azure DevOps Personal Access Token (PAT) expires and is up to the administrator to renew or replace them.
Aggregator stores the PAT in the Azure Function configuration, allowing the rules to access Azure DevOps. You should refresh the PAT before expires or save a new PAT in Aggregator configuration using the <code>configure.instance</code> command.</p><p><img src=PAT-token-in-Function-configuration.png alt="PAT token saved in Azure Function configuration"></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/commit/8253a2e870413ae829c3bbf5bbdf774c791577a5 title="Last modified by Giulio Vian | June 24, 2020" target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 24, 2020</span></a></div><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/edit/master/content//docs/v3/setup/production.md target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#control-performance-and-costs>Control performance and costs</a></li><li><a href=#production-monitoring>Production monitoring</a></li><li><a href=#troubleshooting>Troubleshooting</a></li><li><a href=#renew-azure-devops-personal-access-token-pat>Renew Azure DevOps Personal Access Token (PAT)</a></li></ul></nav></aside></main></body></html>