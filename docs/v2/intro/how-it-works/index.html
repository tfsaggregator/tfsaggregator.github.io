<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Web Service #   The Web Service is deprecated, use Aggregator CLI instead.
 Visual Studio Team Services (VSTS) and TFS (2015 and later) can integrate with other systems through Service hooks. TFS Aggregator Web Service leverage the Web Hooks variant to receive notifications of work items changes in VSTS/TFS.
The common scenario is:
 A user changes some work item&rsquo;s data using Visual Studio or TFS Web Interface, then presses the Save button (or hits Ctrl-S); VSTS/TFS validates the edit and saves the changes to the database; VSTS/TFS call the Aggregator Web Service using HTTPS, the message contains information on the type of change, the instance, project and work item; Aggregator see which Rules apply and execute them, which may call back the loading additional work items; Aggregator calls back VSTS/TFS using HTTPS to save any changed work item."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="How it Works"><meta property="og:description" content="Web Service #   The Web Service is deprecated, use Aggregator CLI instead.
 Visual Studio Team Services (VSTS) and TFS (2015 and later) can integrate with other systems through Service hooks. TFS Aggregator Web Service leverage the Web Hooks variant to receive notifications of work items changes in VSTS/TFS.
The common scenario is:
 A user changes some work item&rsquo;s data using Visual Studio or TFS Web Interface, then presses the Save button (or hits Ctrl-S); VSTS/TFS validates the edit and saves the changes to the database; VSTS/TFS call the Aggregator Web Service using HTTPS, the message contains information on the type of change, the instance, project and work item; Aggregator see which Rules apply and execute them, which may call back the loading additional work items; Aggregator calls back VSTS/TFS using HTTPS to save any changed work item."><meta property="og:type" content="article"><meta property="og:url" content="https://tfsaggregator.github.io/docs/v2/intro/how-it-works/"><meta property="article:modified_time" content="2022-08-10T20:04:25+02:00"><title>How it Works | Aggregator</title><link rel=manifest href=https://tfsaggregator.github.io/manifest.json><link rel=icon href=https://tfsaggregator.github.io/favicon.png type=image/x-icon><link rel=stylesheet href=https://tfsaggregator.github.io/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI="><script defer src=https://tfsaggregator.github.io/en.search.min.6b0c0810f944b5aabd6ed910dbc5fc8b635bcd388c47fb0efd899da47c849819.js integrity="sha256-awwIEPlEtaq9btkQ28X8i2NbzTiMR/sO/YmdpHyEmBk="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://tfsaggregator.github.io/><span>Aggregator</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://tfsaggregator.github.io/docs/v3/>Aggregator 3 (CLI)</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/>Setup</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azdo-authn/>Azure DevOps Personal Access Token</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azure/>Azure CLI Setup</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/docker/>Docker configuration</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/production/>Production on Azure</a><ul></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/>CLI Commands</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/commands/common-options/>Common options</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/authentication-commands/>Authentication commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/instance-commands/>Instance commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/rule-commands/>Rule commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/map-commands/>Mapping commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/info-commands/>Informational commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/command-examples/>Examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/>Rules</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/rules/directives/>Directives</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/workitem/>WorkItem event objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/common-rule-objects/>Common objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-basic/>Basic examples</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-advanced/>Advanced examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/>Design</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/design/caveat/>Caveats</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/parallelism/>Parallelism</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/api/>REST API</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/troubleshoot/>Troubleshoot</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/>Contribute</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/pipelines/>Pipelines</a></li></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v2/>TFS Aggregator v2</a><ul><li><a href=https://tfsaggregator.github.io/docs/v2/intro/ class=collapsed>Introduction</a><ul><li><a href=https://tfsaggregator.github.io/docs/v2/intro/how-it-works/ class=active>How it Works</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/intro/slack-coc/>Code of Conduct</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v2/using/ class=collapsed>Users' Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/admin/ class=collapsed>Administrator Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/ class=collapsed>Contributing</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/changelog/>Changelog</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://tfsaggregator.github.io/svg/menu.svg class=book-icon alt=Menu></label>
<strong>How it Works</strong>
<label for=toc-control><img src=https://tfsaggregator.github.io/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#web-service>Web Service</a></li><li><a href=#server-plugin>Server Plugin</a></li><li><a href=#configuration-changes>Configuration changes</a></li></ul></nav></aside></header><article class=markdown><h2 id=web-service>Web Service
<a class=anchor href=#web-service>#</a></h2><blockquote><p>The Web Service is <strong>deprecated</strong>, use <a href=https://tfsaggregator.github.io/docs/v3>Aggregator CLI</a> instead.</p></blockquote><p>Visual Studio Team Services (VSTS) and TFS (2015 and later) can integrate with other systems through <a href=https://www.visualstudio.com/en-us/docs/integrate/get-started/service-hooks/get-started>Service hooks</a>.
TFS Aggregator Web Service leverage the <a href=https://www.visualstudio.com/en-us/docs/integrate/get-started/service-hooks/services/webhooks>Web Hooks</a> variant
to receive notifications of work items changes in VSTS/TFS.</p><p>The common scenario is:</p><ol><li>A user changes some work item&rsquo;s data using Visual Studio or TFS Web Interface, then presses the <strong>Save</strong> button (or hits <code>Ctrl-S</code>);</li><li>VSTS/TFS validates the edit and saves the changes to the database;</li><li>VSTS/TFS call the Aggregator Web Service using HTTPS, the message contains information on the type of change, the instance, project and work item;</li><li>Aggregator see which Rules apply and execute them, which may call back the loading additional work items;</li><li>Aggregator calls back VSTS/TFS using HTTPS to save any changed work item.</li></ol><p>Note that steps 3 and 5 requires authentication.</p><p><img src=./webservice-authentication.jpg alt="Web Service Authentication"></p><h2 id=server-plugin>Server Plugin
<a class=anchor href=#server-plugin>#</a></h2><p>The following diagram may help understand the control flow.</p><p><img src=./live-scenario.png alt="Plugin flow"></p><ol><li>A user changes some work item&rsquo;s data using Visual Studio or TFS Web Interface, then presses the <strong>Save</strong> button (or hits <code>Ctrl-S</code>);</li><li>TFS validates the edit and saves the changes to the database;</li><li>TFS notifies the Aggregator plugin of the <em>ID</em> of the changed work item</li><li>Aggregator see which Rules apply and execute them, which may cause the loading and saving of additional work items.</li></ol><blockquote><p>Note that step 4 may trigger Aggregator again on the just saved work items.</p></blockquote><p>Keep also in mind that scripts and applications can change work items without user intervention, like <a href=https://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe>Team Foundation Server Integration Tools</a>. Make sure that TFS Aggregator kicks in only when intended.</p><h2 id=configuration-changes>Configuration changes
<a class=anchor href=#configuration-changes>#</a></h2><p>Aggregator loads and parses the Rules from <code>TFSAggregator2.ServerPlugin.policies</code> file at first run. The result is cached in memory and the cache invalidates if the file changes.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/commit/73154e9d6ce35c15dbe3ce9b1da2f106309c4a34 title="Last modified by Jesse Houwing | August 10, 2022" target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/calendar.svg class=book-icon alt=Calendar>
<span>August 10, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/edit/master/content//docs/v2/intro/how-it-works/index.md target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#web-service>Web Service</a></li><li><a href=#server-plugin>Server Plugin</a></li><li><a href=#configuration-changes>Configuration changes</a></li></ul></nav></aside></main></body></html>