<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Building the Solution #  To rebuild, edit or debug the code you must use Visual Studio 2017, Community or Professional Edition at a minimum. In addition you must install the following extensions from Visual Studio Gallery:
 xUnit.net 1.0 WiX 3.10 (optional)  TFS is not required to build nor debugging if you copy locally the required DLLs (for this latter you can use Remote Debugging). WiX is not required if you use the build-installer."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Local Build"><meta property="og:description" content="Building the Solution #  To rebuild, edit or debug the code you must use Visual Studio 2017, Community or Professional Edition at a minimum. In addition you must install the following extensions from Visual Studio Gallery:
 xUnit.net 1.0 WiX 3.10 (optional)  TFS is not required to build nor debugging if you copy locally the required DLLs (for this latter you can use Remote Debugging). WiX is not required if you use the build-installer."><meta property="og:type" content="article"><meta property="og:url" content="https://tfsaggregator.github.io/docs/v2/contrib/local-build/"><meta property="article:modified_time" content="2022-08-10T20:09:10+02:00"><title>Local Build | Aggregator</title><link rel=manifest href=https://tfsaggregator.github.io/manifest.json><link rel=icon href=https://tfsaggregator.github.io/favicon.png type=image/x-icon><link rel=stylesheet href=https://tfsaggregator.github.io/book.min.b3215d9d1d18d9051e7fbe8f256ff80e30f41d29073b86348e230d297b771002.css integrity="sha256-syFdnR0Y2QUef76PJW/4DjD0HSkHO4Y0jiMNKXt3EAI="><script defer src=https://tfsaggregator.github.io/en.search.min.df6a04da9576d3f38fefe50e3fe21520b76d640bb11dff2bfc2a1fd8e363de6c.js integrity="sha256-32oE2pV20/OP7+UOP+IVILdtZAuxHf8r/Cof2ONj3mw="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=https://tfsaggregator.github.io/><span>Aggregator</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://tfsaggregator.github.io/docs/v3/>Aggregator 3 (CLI)</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/>Setup</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azdo-authn/>Azure DevOps Personal Access Token</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/azure/>Azure CLI Setup</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/docker/>Docker configuration</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/setup/production/>Production on Azure</a><ul></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/>CLI Commands</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/commands/common-options/>Common options</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/authentication-commands/>Authentication commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/instance-commands/>Instance commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/rule-commands/>Rule commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/map-commands/>Mapping commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/info-commands/>Informational commands</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/commands/command-examples/>Examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/>Rules</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/rules/directives/>Directives</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/workitem/>WorkItem event objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/common-rule-objects/>Common objects</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-basic/>Basic examples</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/rules/rule-examples-advanced/>Advanced examples</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/>Design</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/design/caveat/>Caveats</a></li><li><a href=https://tfsaggregator.github.io/docs/v3/design/parallelism/>Parallelism</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/api/>REST API</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/troubleshoot/>Troubleshoot</a><ul></ul></li><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/>Contribute</a><ul><li><a href=https://tfsaggregator.github.io/docs/v3/contrib/pipelines/>Pipelines</a></li></ul></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v2/>TFS Aggregator v2</a><ul><li><a href=https://tfsaggregator.github.io/docs/v2/intro/ class=collapsed>Introduction</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/using/ class=collapsed>Users' Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/admin/ class=collapsed>Administrator Guide</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/ class=collapsed>Contributing</a><ul><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/developer-intro/>Introduction to Contributors</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/source-code/>Source Code</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/local-build/ class=active>Local Build</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/debugging/debugging/>Debugging</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/continuous-integration/>Continuous Integration</a></li><li><a href=https://tfsaggregator.github.io/docs/v2/contrib/documentation/>Documentation</a></li></ul></li><li><a href=https://tfsaggregator.github.io/docs/v2/changelog/>Changelog</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://tfsaggregator.github.io/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Local Build</strong>
<label for=toc-control><img src=https://tfsaggregator.github.io/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#building-the-solution>Building the Solution</a><ul><li><a href=#references>References</a></li><li><a href=#solution-configurations>Solution Configurations</a></li><li><a href=#version-numbers>Version numbers</a></li></ul></li><li><a href=#produce-the-msi-windows-installer>Produce the MSI Windows Installer</a></li></ul></nav></aside></header><article class=markdown><h2 id=building-the-solution>Building the Solution
<a class=anchor href=#building-the-solution>#</a></h2><p>To rebuild, edit or debug the code you must use Visual Studio 2017, Community or Professional Edition at a minimum.
In addition you must install the following extensions from Visual Studio Gallery:</p><ul><li>xUnit.net 1.0</li><li>WiX 3.10 (optional)</li></ul><p>TFS is not required to build nor debugging if you copy locally the required DLLs (for this latter you can use <a href=https://msdn.microsoft.com/en-us/library/y7f5zaaa.aspx>Remote Debugging</a>).
WiX is not required if you use the <code>build-installer.proj</code> MSBuild script.</p><h3 id=references>References
<a class=anchor href=#references>#</a></h3><p>Building requires a number of TFS assemblies that cannot be redistributed. You can find the complete list in these files</p><ul><li>TFS 2013 update 2 or newer: <code>References/2013/PLACEHOLDER.txt</code></li><li>TFS 2015: <code>References/2015/PLACEHOLDER.txt</code></li><li>TFS 2015 Update 1: <code>References/2015.1/PLACEHOLDER.txt</code></li><li>TFS 2015 Update 2: <code>References/2015.2/PLACEHOLDER.txt</code></li><li>TFS 2017: <code>References/2017/PLACEHOLDER.txt</code></li><li>TFS 2017 Update 2: <code>References/2017.2/PLACEHOLDER.txt</code></li></ul><p>if you have TFS installed on your development machine, the assemblies for that version will be loaded automatically from the installation folder.</p><h3 id=solution-configurations>Solution Configurations
<a class=anchor href=#solution-configurations>#</a></h3><p>The Build Configuration selected, like <em>Debug-2013</em> or <em>Release-2015</em>, determines the target TFS version, that is the referenced assemblies.</p><p>Sadly, similar <a href=http://blogs.ripple-rock.com/rorystreet/2014/05/08/WhereIsWorkItemChangedEventInTFS2013Update2.aspx>to the release of TFS 2013 update 2 when there were breaking changes</a>, <a href=http://blogs.msdn.com/b/visualstudioalm/archive/2015/10/13/breaking-change-in-tfs-2015-update-1-for-server-side-plugins.aspx>TFS 2015 Update 1 introduces a breaking change in the API</a>, so you can find some <a href=https://msdn.microsoft.com/en-us/library/4y6tbswk.aspx>conditionally compiled</a> code based on the symbols <code>TFS2013</code>, <code>TFS2015</code> or <code>TFS2015u1</code>.</p><p>See <a href=https://tfsaggregator.github.io/intro#supported-tfs-versions>Supported TFS versions</a> for the full list.</p><h3 id=version-numbers>Version numbers
<a class=anchor href=#version-numbers>#</a></h3><p>Assemblies produced locally always have the <code>2.2.0.0</code> version, at least until we further enhance the build scripts.</p><h2 id=produce-the-msi-windows-installer>Produce the MSI Windows Installer
<a class=anchor href=#produce-the-msi-windows-installer>#</a></h2><p>The <code>build-installer.proj</code> MSBuild script takes care of generating the Windows Installer MSI file.</p><p>The MSI packages all three Aggregator flavors, one for each supported TFS version.
The installer detects the TFS version installed and deploy the correct assemblies.</p><p>The MSBuild script builds multiple times the <code>tfs-aggregator-plugin.sln</code> solution, one for each supported TFS version.
Then the files are copied in a simple layout in the <code>_collect</code> folder. Some WiX source is generated and finally the <code>Setup.Aggregator\Setup.Aggregator.wixproj</code> is launched to produce the MSI package.</p><blockquote><p><strong>Caveat: TFS versions values are in multiple places</strong>, e.g.</p><ul><li>source code conditional compile</li><li>WiX sources</li><li>MSBuild project files</li></ul></blockquote><p>To generate the MSI, in an <em>MSBuild Command Prompt</em> (VS2015+) or a <em>Developer Command Prompt</em> (VS2013) run</p><pre><code>msbuild build-installer.proj /p:Configuration=Release
</code></pre><p>The <strong><code>Configuration</code></strong> property is mandatory; allowed values are <em>Debug</em> and <em>Release</em>.</p><p>Three MSBuild properties <code>BuildSolution</code>, <code>CollectFiles</code>, <code>BuildMSI</code>, whose meaning is self-explanatory, can be used to skip some process&rsquo; steps.</p><pre><code>msbuild build-installer.proj /p:Configuration=Release /p:BuildSolution=False /p:CollectFiles=False /p:BuildMSI=True
</code></pre><p>MSI file is available in <code>Setup.Aggregator\bin\$(Configuration)</code> as <code>TFSAggregator-0.2.2-alpha+local-$(Configuration).msi</code>. Notice the zero version number to highlight that is has been produced locally.</p><blockquote><p><strong>Caveat: avoid modifying anything in this area unless you are fluent in MSBuild, WiX and Windows Installer technologies.</strong></p></blockquote></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/commit/e55b9ed04b7bb7f8db207f6446cd1122f25a67ec title="Last modified by Jesse Houwing | August 10, 2022" target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/calendar.svg class=book-icon alt=Calendar>
<span>August 10, 2022</span></a></div><div><a class="flex align-center" href=https://github.com/tfsaggregator/tfsaggregator-docs-hugo/edit/master/content//docs/v2/contrib/local-build.md target=_blank rel=noopener><img src=https://tfsaggregator.github.io/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#building-the-solution>Building the Solution</a><ul><li><a href=#references>References</a></li><li><a href=#solution-configurations>Solution Configurations</a></li><li><a href=#version-numbers>Version numbers</a></li></ul></li><li><a href=#produce-the-msi-windows-installer>Produce the MSI Windows Installer</a></li></ul></nav></aside></main></body></html>